[H[2J[3J[0;36m============================================[0m
[1;37m🔍 Docker实验环境系统巡检[0m
[0;36m============================================[0m
[1;33m📅 检查时间: 2025年10月15日 10:43:01[0m
[1;33m📝 日志文件: /root/copilot-docker-experiments/temp/health_check_20251015.log[0m

[0;34m🖥️ [1/7] 系统基础信息检查[0m
====================
[0;36m📅 当前时间:[0m Wed 15 Oct 2025 10:43:01 AM CST
[0;36m⏱️ 系统运行时间:[0m
 10:43:01 up 12:58,  0 users,  load average: 0.06, 0.03, 0.00

[0;36m🐧 操作系统信息:[0m
NAME="Ubuntu"
VERSION="20.04.6 LTS (Focal Fossa)"
PRETTY_NAME="Ubuntu 20.04.6 LTS"
VERSION_ID="20.04"
VERSION_CODENAME=focal
UBUNTU_CODENAME=focal

[0;36m🔧 内核版本:[0m 5.4.0-216-generic
[0;36m💻 主机名:[0m lab1014
系统基础信息检查完成: ✅ 正常

[0;34m🔥 [2/7] CPU性能巡检[0m
===============
[0;36m💿 CPU基本信息:[0m
Architecture:                       x86_64
CPU(s):                             4
On-line CPU(s) list:                0-3
Model name:                         Intel(R) Core(TM) Ultra 7 255H
CPU MHz:                            1961.220
NUMA node0 CPU(s):                  0-3

[0;36m📊 CPU使用率 (实时1秒采样):[0m
用户态: 3.1, 系统态: 1.6, 空闲: 92.2

[0;36m⚡ 系统负载:[0m
1分钟: 0.06, 5分钟: 0.03, 15分钟: 0.00

[0;36m🔧 CPU频率信息:[0m
cpu MHz		: 2386.725
cpu MHz		: 1740.807
cpu MHz		: 1598.166
cpu MHz		: 1633.264
[2025-10-15 10:43:01] CPU性能检查完成: ✅ 正常 - 用户态: 3.1, 系统态: 1.6, 空闲: 92.2
CPU性能检查完成: ✅ 正常 - 用户态: 3.1, 系统态: 1.6, 空闲: 92.2

[0;34m🧠 [3/7] 内存状态分析[0m
================
[0;36m📈 内存使用概览:[0m
              total        used        free      shared  buff/cache   available
Mem:          7.8Gi       2.0Gi       176Mi       2.0Mi       5.6Gi       5.5Gi
Swap:         2.0Gi       1.0Mi       2.0Gi

[0;36m🔍 详细内存信息:[0m
MemTotal:      8136164  kB
MemFree:       180108   kB
MemAvailable:  5724708  kB
Buffers:       404412   kB
Cached:        4728988  kB
SwapCached:    108      kB
SwapTotal:     2097148  kB
SwapFree:      2095600  kB

[0;36m📊 内存使用率:[0m
内存使用率: 25.80%
Swap使用率: 0.07%
[2025-10-15 10:43:01] 内存状态检查完成: ✅ 正常 - 内存使用率: 25.80%, Swap使用率: 0.07%
内存状态检查完成: ✅ 正常 - 内存使用率: 25.80%, Swap使用率: 0.07%

[0;34m💾 [4/7] 硬盘空间检查[0m
================
[0;36m📊 磁盘使用情况:[0m
Filesystem      Size  Used Avail Use% Mounted on
/dev/sda1        40G   12G   26G  32% /
tmpfs           3.9G     0  3.9G   0% /dev/shm

[0;36m🗃️ 分区详情:[0m
NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
fd0      2:0    1    4K  0 disk 
sda      8:0    0   40G  0 disk 
└─sda1   8:1    0   40G  0 part /
sr0     11:0    1 1024M  0 rom  

[0;36m⚡ 磁盘I/O统计:[0m
Linux 5.4.0-216-generic (lab1014) 	10/15/2025 	_x86_64_	(4 CPU)

Device             tps    kB_read/s    kB_wrtn/s    kB_dscd/s    kB_read    kB_wrtn    kB_dscd
fd0               0.00         0.00         0.00         0.00         16          0          0
loop0             0.00         0.00         0.00         0.00          8          0          0
sda               5.62        24.27       289.68         0.00    1133832   13534221          0



[2025-10-15 10:43:01] 硬盘空间检查完成: ✅ 正常 - 使用率32%
硬盘空间检查完成: ✅ 正常 - 使用率32%

[0;34m🌐 [5/7] 网络连接测试[0m
================
[0;36m🔌 网络接口状态:[0m
2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP group default qlen 1000
    link/ether 00:15:5d:01:3a:05 brd ff:ff:ff:ff:ff:ff
    inet 192.168.14.201/24 brd 192.168.14.255 scope global noprefixroute eth0
    link/ether 02:42:c0:47:40:67 brd ff:ff:ff:ff:ff:ff
108: veth327f89c@if107: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue master docker0 state UP group default 

[0;36m🎯 DNS解析测试:[0m
✅ DNS解析正常

[0;36m🚀 外网连通性测试:[0m
✅ 外网连接正常

[0;36m🔗 网络端口监听:[0m
tcp        0      0 0.0.0.0:8084            0.0.0.0:*               LISTEN      18354/dockerd       
tcp        0      0 0.0.0.0:8501            0.0.0.0:*               LISTEN      18354/dockerd       
tcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN      575/systemd-resolve 
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      1299/sshd: /usr/sbi 
tcp        0      0 0.0.0.0:8090            0.0.0.0:*               LISTEN      18354/dockerd       
tcp        0      0 0.0.0.0:443             0.0.0.0:*               LISTEN      18354/dockerd       
tcp        0      0 127.0.0.1:44479         0.0.0.0:*               LISTEN      12954/containerd    
tcp        0      0 0.0.0.0:2048            0.0.0.0:*               LISTEN      18354/dockerd       
tcp        0      0 0.0.0.0:9000            0.0.0.0:*               LISTEN      18354/dockerd       
tcp        0      0 0.0.0.0:27018           0.0.0.0:*               LISTEN      18354/dockerd       
[2025-10-15 10:43:01] 网络连接检查完成: ✅ 正常
网络连接检查完成: ✅ 正常

[0;34m🐳 [6/7] Docker运行时检查[0m
===================
[0;36m🔧 Docker服务状态:[0m
✅ Docker服务运行正常

[0;36m📦 Docker版本信息:[0m
Docker version 26.1.3, build 26.1.3-0ubuntu1~20.04.1
docker-compose version 1.25.0, build unknown

[0;36m📊 Docker资源使用:[0m
TYPE            TOTAL     ACTIVE    SIZE      RECLAIMABLE
Images          13        10        4.749GB   2.6GB (54%)
Containers      10        10        471.8kB   0B (0%)
Local Volumes   13        4         318.5MB   590.6kB (0%)
Build Cache     0         0         0B        0B

[0;36m🏃 运行中的容器:[0m
NAMES                           STATUS                    PORTS
tradingagents-web               Up 17 hours (unhealthy)   0.0.0.0:8501->8501/tcp
tradingagents-mongo-express     Up 17 hours               0.0.0.0:8084->8081/tcp
tradingagents-redis-commander   Up 17 hours (unhealthy)   0.0.0.0:8083->8081/tcp
tradingagents-redis             Up 17 hours (healthy)     0.0.0.0:6380->6379/tcp
tradingagents-mongodb           Up 17 hours (healthy)     0.0.0.0:27018->27017/tcp
beszel-agent                    Up 17 hours               
nginx-proxy-manager             Up 17 hours               0.0.0.0:80-81->80-81/tcp, 0.0.0.0:443->443/tcp
beszel                          Up 17 hours               0.0.0.0:8090->8090/tcp
game-2048                       Up 17 hours               0.0.0.0:2048->80/tcp
portainer                       Up 17 hours               8000/tcp, 9443/tcp, 0.0.0.0:9000->9000/tcp

[0;36m📈 容器统计:[0m 当前运行 10 个容器
[2025-10-15 10:43:01] Docker运行时检查完成: ✅ 正常 - 运行容器数: 10
Docker运行时检查完成: ✅ 正常 - 运行容器数: 10

[0;34m🩺 [7/7] 关键服务健康检查[0m
====================
[0;36m🎯 Web服务响应检查:[0m
✅ TradingAgents (8501): 服务正常
✅ Portainer (9000): 服务正常
✅ Beszel (8090): 服务正常
✅ NPM (81): 服务正常

[0;36m🗄️ 数据库服务检查:[0m
✅ MongoDB (27018): 连接正常
✅ Redis (6380): 连接正常

[0;36m📈 容器健康状态:[0m
tradingagents-web: Up 17 hours (unhealthy)
tradingagents-redis-commander: Up 17 hours (unhealthy)
tradingagents-redis: Up 17 hours (healthy)
tradingagents-mongodb: Up 17 hours (healthy)
[2025-10-15 10:43:01] 关键服务检查完成: ✅ 正常
关键服务检查完成: ✅ 正常

[0;36m============================================[0m
[1;37m📋 系统巡检报告总结[0m
[0;36m============================================[0m
[0;32m系统基础信息: ✅ 正常[0m
[0;32mCPU性能: ✅ 正常[0m
[0;32m内存状态: ✅ 正常[0m
[0;32m硬盘空间: ✅ 正常[0m
[0;32m网络连接: ✅ 正常[0m
[0;32mDocker运行时: ✅ 正常[0m
[0;32m关键服务: ✅ 正常[0m

[0;32m🎉 系统整体状态: 健康运行[0m
[2025-10-15 10:43:01] 巡检完成: 系统整体状态健康
巡检完成: 系统整体状态健康
[0;36m📝 详细日志: /root/copilot-docker-experiments/temp/health_check_20251015.log[0m
[0;36m📅 下次建议巡检时间: 2025年10月16日[0m

[2025-10-15 10:43:01] 系统巡检脚本执行完成
系统巡检脚本执行完成
